(this.webpackJsonpew=this.webpackJsonpew||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/main.3538342a.jpg"},12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(8),r=a.n(i),c=(a(17),a(1)),s=a(2),l=a(4),u=a(3),h=a(5),m=a(6),d=a.n(m),p=a(9),f=a(11),v=960,g=480,k=["johan","gill","anders","peter"],w={johan:"#F9EC37",gill:"#EFF5EF",anders:"#35A14A",peter:"#009AC0"},E=function(e,t){var a=t.x,n=t.y,o=t.width,i=t.height,r=t.color;e.fillStyle=r,e.fillRect(a,n,o,i)},y=function(e,t){var a,n=function(e){return Object.values(e).reduce((function(e,t){return e+t}),0)}(t);return e.reduce((function(e,o){var i=t[o],r=w[o],c=0;if(a){var s=e[a];c=s.x+s.width+1}var l={y:0,x:c,width:Math.max(50+i/n*(v-200),50),height:g,color:r};return e[o]=l,a=o,e}),{})},b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).likes={johan:[],gill:[],anders:[],peter:[]},a.votes={johan:0,gill:0,anders:0,peter:0},a.updateCanvas=function(){try{var e=Date.now(),t=e-a.lastIteration,n=a.canvasRef.current.getContext("2d"),o=y(k,a.votes);n.clearRect(0,0,g,v),k.forEach((function(e){E(n,o[e]);var i=a.likes[e],r=a.votes[e],c=o[e].x+o[e].width/2-20;n.font="20px Courier New ",n.fillStyle="rgba(0, 0, 0, 1)",n.fillText("".concat(r),o[e].x,g-5),i.forEach((function(e,a){var o=e.pos-.2*t;if(o<0)i.splice(a,1);else{var r=Math.min(Math.round(o/(g/2)*100)/100,1);n.fillStyle="rgba(80, 80, 0, ".concat(r,")"),n.font="30px Courier New ",n.fillText("+".concat(e.value),c,e.pos),e.pos=o}}))})),a.lastIteration=e,a.animationFrameRequestId=requestAnimationFrame(a.updateCanvas)}catch(i){console.log(i)}},a.animationFrameRequestId=void 0,a.canvasRef=o.a.createRef(),a.animate=!0,a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.lastIteration=Date.now(),this.animationFrameRequestId=requestAnimationFrame(this.updateCanvas)}},{key:"componeneWillUnomount",value:function(){this.animationFrameRequestId&&cancelAnimationFrame(this.animationFrameRequestId)}},{key:"shouldComponentUpdate",value:function(e){var t=this;return Object.entries(e.likes).forEach((function(e){var a=Object(f.a)(e,2),n=a[0],o=a[1];o&&(t.votes[n]=t.votes[n]+=o,t.likes[n].push({pos:g/2+60,value:o}))})),!1}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("canvas",{ref:this.canvasRef,width:v,height:g}))}}]),t}(o.a.Component),C=a(10),O=a.n(C),j=(a(18),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).ws=new WebSocket("ws://".concat(window.location.hostname)),a.newLike=function(e){a.setState({likes:e})},a.mapClick=function(e){a.ws.send(e)},a.state={error:!1,ready:!1,likes:{}},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.a.parseFont("/Fire Font-k",p.a),d()("CHEATER DETECTED",{font:"/Fire Font-k"},(function(e,t){e||(console.log(t),console.log("Here at EdgarWars.com we have a very strict cheating policy and any attempt at cheating is therefore greatly encouraged."),console.log("As long as your Edgar wins..."))})),this.ws.onopen=function(){e.setState({ready:!0})},this.ws.onclose=function(){e.setState({error:!0})},this.ws.onmessage=function(t){var a=JSON.parse(t.data);e.newLike(a)}}},{key:"render",value:function(){var e=this.state,t=e.ready,a=e.error,n=this.state.likes;return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"App-content"},a&&o.a.createElement("div",null," WOOOOOOPS. Try to reload, if that doesn't work then you are fuuuuuucked."),t&&!a&&o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:O.a,className:"App-logo",alt:"logo",useMap:"#image-map"}),o.a.createElement("map",{name:"image-map"},o.a.createElement("area",{onClick:this.mapClick.bind(this,"johan"),alt:"Johan",title:"Johan",coords:"127,145,272,483",shape:"rect"}),o.a.createElement("area",{onClick:this.mapClick.bind(this,"gill"),alt:"Gill",title:"Gill",coords:"331,147,480,478",shape:"rect"}),o.a.createElement("area",{onClick:this.mapClick.bind(this,"anders"),alt:"Anders",title:"Anders",coords:"669,483,529,148",shape:"rect"}),o.a.createElement("area",{onClick:this.mapClick.bind(this,"peter"),alt:"Peter",title:"Peter",coords:"832,483,691,147",shape:"rect"})),o.a.createElement(b,{likes:n}))))}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[12,1,2]]]);
//# sourceMappingURL=main.18424f9b.chunk.js.map